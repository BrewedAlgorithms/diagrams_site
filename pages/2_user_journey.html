<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Journey - NeuroNexus</title>
    <link rel="stylesheet" href="../css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/panzoom@9.4.0/dist/panzoom.min.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .diagram-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            height: 600px;
            width: 100%;
        }
        #diagram-element {
            transform-origin: 0 0;
            width: 100%;
            height: 100%;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        .zoom-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 10;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 4px;
            padding: 5px;
        }
        .zoom-controls button {
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            width: 30px;
            height: 30px;
            margin: 0 2px;
            cursor: pointer;
            font-size: 14px;
        }
        .zoom-controls button:hover {
            background: var(--primary-color);
        }
        .mermaid {
            width: 100%;
            height: 100%;
            display: block !important;
        }
        .mermaid svg {
            touch-action: none;
            width: 100%;
            height: 100%;
            display: block !important;
            min-width: 100%;
            min-height: 100%;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="logo">
            <a href="../index.html">
                <i class="fas fa-project-diagram"></i>
                <span>NeuroNexus</span>
            </a>
        </div>
        <div class="nav-links">
            <a href="../index.html">Home</a>
            <a href="../index.html#story">Our Story</a>
            <a href="../index.html#diagrams">Diagrams</a>
            <a href="../index.html#research">Research</a>
            <a href="../index.html#technology">Technology</a>
        </div>
    </nav>
    
    <div class="diagram-page">
        <div class="page-content">
            <h1 class="section-title" data-aos="fade-up">User Journey</h1>
            
            <div class="diagram-explanation" data-aos="fade-up">
                <p>This diagram illustrates the complete customer journey through the NeuroNexus, from entering the store to completing a purchase. Our solution streamlines the traditional checkout process, eliminating common friction points and creating a more enjoyable shopping experience.</p>
            </div>
            
            <div class="diagram-container" data-aos="fade-up">
                <div class="zoom-controls">
                    <button id="zoom-in" title="Zoom In"><i class="fas fa-search-plus"></i></button>
                    <button id="zoom-out" title="Zoom Out"><i class="fas fa-search-minus"></i></button>
                    <button id="reset-zoom" title="Reset Zoom"><i class="fas fa-home"></i></button>
                </div>
                <div id="diagram-element">
                    <div class="mermaid">
                    flowchart TB
                        Start([ðŸš¶ User Enters Store]) --> Browse[ðŸ›’ Browse Products]
                        Browse --> Cart[ðŸ§º Add Items to Cart]
                        Cart --> CheckoutZone[âž¡ï¸ Approach Checkout Zone]
                        
                        subgraph "Automatic Detection"
                            CheckoutZone --> RFIDScan[ðŸ“¡ RFID System Scans All Items]
                            RFIDScan --> CartDisplay[ðŸ“‹ Items Displayed on Screen]
                        end
                        
                        CartDisplay --> ModifyCart{ðŸ”„ Modify Cart?}
                        ModifyCart -->|Yes| Adjust[âœï¸ Add/Remove Items]
                        Adjust --> CartDisplay
                        
                        ModifyCart -->|No| SelectPayment[ðŸ’³ Select Payment Method]
                        
                        subgraph "Payment Options"
                            SelectPayment --> Bio[ðŸ‘† Fingerprint]
                            SelectPayment --> NFC[ðŸ“± NFC Mobile]
                            SelectPayment --> Card[ðŸ’³ Credit/Debit Card]
                            SelectPayment --> Cash[ðŸ’µ Cash]
                        end
                        
                        Bio --> ProcessBio[ðŸ”„ Process Biometric Payment]
                        NFC --> ProcessNFC[ðŸ”„ Process NFC Payment]
                        Card --> ProcessCard[ðŸ”„ Process Card Payment]
                        Cash --> ProcessCash[ðŸ”„ Process Cash Payment]
                        
                        ProcessBio --> PaymentComplete[âœ… Payment Complete]
                        ProcessNFC --> PaymentComplete
                        ProcessCard --> PaymentComplete
                        ProcessCash --> PaymentComplete
                        
                        PaymentComplete --> ReceiptChoice{ðŸ§¾ Receipt?}
                        ReceiptChoice -->|Digital| SendDigital[ðŸ“§ Send to Email/App]
                        ReceiptChoice -->|Print| PrintReceipt[ðŸ–¨ï¸ Print Receipt]
                        ReceiptChoice -->|None| NoReceipt[âŒ No Receipt]
                        
                        SendDigital --> Exit([ðŸš¶ Exit Store])
                        PrintReceipt --> Exit
                        NoReceipt --> Exit
                    </div>
                </div>
            </div>
            
            <div class="feature-explanation" data-aos="fade-up">
                <h2>Journey Stages Explained</h2>
                <p>The user journey through our NeuroNexus consists of several key stages designed to minimize friction and maximize convenience:</p>
                <br>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-shopping-basket"></i>
                    </div>
                    <div class="feature-content">
                        <h3>Pre-Checkout Experience</h3>
                        <p>The journey begins when the customer enters the store and starts browsing products. Unlike traditional shopping, customers don't need to worry about scanning individual items or keeping track of prices manually. They simply select items they want and place them in their cart or basket as usual, creating a natural shopping experience.</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-broadcast-tower"></i>
                    </div>
                    <div class="feature-content">
                        <h3>Automatic Detection</h3>
                        <p>When customers approach the checkout zone, the system automatically detects and scans all items in the cart using RFID technology. The complete cart contents instantly appear on the checkout screen with accurate pricing information. Customers can verify their purchases without the time-consuming process of scanning each item individually.</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-edit"></i>
                    </div>
                    <div class="feature-content">
                        <h3>Cart Review & Modification</h3>
                        <p>If customers need to make changes to their cart, they can easily add or remove items directly from the checkout screen. The system updates in real-time, showing the modified cart contents and adjusted total price. This creates a forgiving shopping experience where last-minute decisions are easily accommodated.</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-wallet"></i>
                    </div>
                    <div class="feature-content">
                        <h3>Flexible Payment Options</h3>
                        <p>Our system supports multiple payment methods to accommodate diverse customer preferences. Options include secure biometric authentication, NFC/mobile payments, traditional card payments, and cash for those who prefer conventional methods. This versatility ensures no customer is left behind by the technological advancement.</p>
                    </div>
                </div>
                
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-receipt"></i>
                    </div>
                    <div class="feature-content">
                        <h3>Customizable Receipt Options</h3>
                        <p>Once payment is complete, customers can choose their preferred receipt method. Digital receipts can be sent instantly to the customer's email or mobile app, reducing paper waste. Traditional printed receipts remain available, and customers can also opt to skip receipts entirely for small purchases.</p>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons" data-aos="fade-up">
                <a href="1_system_architecture.html" class="nav-button prev">
                    <i class="fas fa-chevron-left"></i> System Architecture
                </a>
                <a href="3_biometric_payment_sequence.html" class="nav-button next">
                    Biometric Payment Sequence <i class="fas fa-chevron-right"></i>
                </a>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <a href="../index.html">
                    <i class="fas fa-project-diagram"></i>
                    <span>NeuroNexus</span>
                </a>
            </div>
            <div class="footer-links">
                <a href="../index.html">Home</a>
                <a href="../index.html#story">Our Story</a>
                <a href="../index.html#diagrams">Diagrams</a>
                <a href="../index.html#research">Research</a>
            </div>
            <div class="footer-copyright">
                &copy; 2023 NeuroNexus. All rights reserved.
            </div>
        </div>
    </footer>
    
    <script>
        // Initialize Mermaid with specific settings for better rendering
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true,
                curve: 'basis'
            },
            logLevel: 'error'
        });

        // Function to check if an element is visible in the viewport
        function isElementVisible(el) {
            if (!el) return false;
            const rect = el.getBoundingClientRect();
            return rect.width > 0 && rect.height > 0;
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize AOS animation library
            AOS.init({
                duration: 800,
                once: true
            });
            
            // Allow some time for mermaid to render first
            let attempts = 0;
            const maxAttempts = 10;
            const checkInterval = 500; // Check every 500ms
            
            function initPanzoom() {
                const mermaidDiv = document.querySelector('.mermaid');
                const diagramSvg = mermaidDiv ? mermaidDiv.querySelector('svg') : null;
                
                if (diagramSvg && isElementVisible(diagramSvg)) {
                    console.log("Mermaid diagram rendered successfully!");
                    
                    // Make sure the SVG is fully visible
                    diagramSvg.style.display = 'block';
                    diagramSvg.style.width = '100%';
                    diagramSvg.style.height = '100%';
                    diagramSvg.style.minWidth = '100%';
                    diagramSvg.style.minHeight = '100%';
                    
                    // Initialize Panzoom on the diagram element
                    const element = document.getElementById('diagram-element');
                    
                    if (element && typeof Panzoom === 'function') {
                        try {
                            // Initialize Panzoom with optimized settings
                            const panzoom = Panzoom(element, {
                                maxScale: 5,
                                minScale: 0.5,
                                contain: 'outside',
                                excludeClass: 'zoom-controls',
                                canvas: true
                            });
                            
                            // Set the cursor style
                            element.style.cursor = 'grab';
                            
                            // Enable mouse wheel zooming
                            element.addEventListener('wheel', function(e) {
                                e.preventDefault();
                                const delta = e.deltaY;
                                
                                if (delta > 0) {
                                    panzoom.zoomOut(0.2, {
                                        animate: false
                                    });
                                } else {
                                    panzoom.zoomIn(0.2, {
                                        animate: false
                                    });
                                }
                            });
                            
                            // Change cursor when dragging
                            element.addEventListener('mousedown', function() {
                                this.style.cursor = 'grabbing';
                            });
                            
                            element.addEventListener('mouseup', function() {
                                this.style.cursor = 'grab';
                            });
                            
                            // Connect zoom control buttons
                            document.getElementById('zoom-in').addEventListener('click', function() {
                                panzoom.zoomIn(0.5, { animate: true });
                            });
                            
                            document.getElementById('zoom-out').addEventListener('click', function() {
                                panzoom.zoomOut(0.5, { animate: true });
                            });
                            
                            document.getElementById('reset-zoom').addEventListener('click', function() {
                                panzoom.reset({ animate: true });
                            });
                            
                            // Prevent text selection when dragging
                            element.addEventListener('selectstart', function(e) {
                                e.preventDefault();
                                return false;
                            });
                            
                            console.log("Panzoom initialized successfully");
                        } catch (error) {
                            console.error("Panzoom initialization error:", error);
                        }
                    } else {
                        console.warn("Diagram element not found or Panzoom not available");
                    }
                } else {
                    // Try again if we haven't exceeded max attempts
                    attempts++;
                    if (attempts < maxAttempts) {
                        console.log(`Waiting for Mermaid diagram to render... (attempt ${attempts}/${maxAttempts})`);
                        setTimeout(initPanzoom, checkInterval);
                    } else {
                        console.error("Failed to find rendered Mermaid diagram after multiple attempts");
                        alert("There was a problem rendering the diagram. Please refresh the page to try again.");
                    }
                }
            }
            
            // Start checking for diagram rendering
            setTimeout(initPanzoom, 500);
        });
    </script>
</body>
</html> 